<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Editor Online - Teste</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f6f8fa;
    }
    .editor-container {
      display: flex;
      flex-wrap: wrap;
      padding: 16px;
      gap: 16px;
      background-color: #e9ecef;
      border-bottom: 2px solid #d1d5da;
    }
    .editor {
      flex: 1 1 30%;
      display: flex;
      flex-direction: column;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      border: 1px solid #d1d5da;
      min-width: 280px;
      transition: box-shadow 0.2s;
    }
    .editor:focus-within {
      box-shadow: 0 4px 16px rgba(0,0,0,0.10);
      border-color: #6c63ff;
    }
    .editor-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 5px;
      gap: 5px;
      padding: 10px 12px 0 12px;
    }
    .editor label {
      font-weight: bold;
      font-size: 1.1em;
      color: #333;
      letter-spacing: 0.5px;
    }
    .editor textarea {
      width: 100%;
      height: 200px;
      resize: vertical;
      padding: 12px;
      font-family: 'Fira Mono', 'Consolas', monospace;
      font-size: 1em;
      border: none;
      border-radius: 0 0 8px 8px;
      background: #f8fafc;
      color: #222;
      outline: none;
      box-sizing: border-box;
      transition: background 0.2s;
    }
    .editor textarea:focus {
      background: #eef2fb;
    }
    .format-btn {
      margin-bottom: 0;
      background: #f3f3f3;
      border: 1px solid #d1d5da;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      padding: 4px 8px;
      transition: background 0.2s, border 0.2s;
      color: #6c63ff;
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);
    }
    .format-btn:hover {
      background: #e0e7ff;
      border-color: #6c63ff;
    }
    .output-container {
      margin: 0;
      padding: 0 16px 16px 16px;
      background: #f6f8fa;
    }
    iframe {
      width: 100%;
      height: 400px;
      border: 1px solid #d1d5da;
      border-radius: 8px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      margin-top: 12px;
    }
    @media (max-width: 900px) {
      .editor-container {
        flex-direction: column;
      }
      .editor {
        min-width: 0;
      }
    }
  </style>
</head>
<body>
  <div class="editor-container">
    <div class="editor">
      <div class="editor-header">
        <label for="html">HTML</label>
        <button type="button" class="format-btn" data-target="html" title="Formatar HTML">ðŸ§¹</button>
      </div>
      <textarea id="html" placeholder="<h1>OlÃ¡ Mundo</h1>"></textarea>
    </div>
    <div class="editor">
      <div class="editor-header">
        <label for="css">CSS</label>
        <button type="button" class="format-btn" data-target="css" title="Formatar CSS">ðŸ§¹</button>
      </div>
      <textarea id="css" placeholder="body { background: lightyellow; }"></textarea>
    </div>
    <div class="editor">
      <div class="editor-header">
        <label for="js">JavaScript</label>
        <button type="button" class="format-btn" data-target="js" title="Formatar JavaScript">ðŸ§¹</button>
      </div>
      <textarea id="js" placeholder="console.log('OlÃ¡ Mundo')"></textarea>
    </div>
  </div>

  <div class="output-container">
    <iframe id="preview"></iframe>
  </div>

  <script>
    const htmlInput = document.getElementById('html');
    const cssInput = document.getElementById('css');
    const jsInput = document.getElementById('js');
    const previewFrame = document.getElementById('preview');

    function updatePreview() {
      const html = htmlInput.value;
      const css = `<style>${cssInput.value}</style>`;
      const js = `<script>${jsInput.value}<\/script>`;
      const code = `${html}\n${css}\n${js}`;

      const preview = previewFrame.contentDocument || previewFrame.contentWindow.document;
      preview.open();
      preview.write(code);
      preview.close();
    }

    htmlInput.addEventListener('input', updatePreview);
    cssInput.addEventListener('input', updatePreview);
    jsInput.addEventListener('input', updatePreview);

    window.addEventListener('load', updatePreview);

    function formatHTML(html) {
      // FormataÃ§Ã£o simples: identaÃ§Ã£o de tags
      let formatted = '';
      const lines = html.replace(/></g, '>\n<').split('\n');
      let indent = 0;
      lines.forEach(line => {
        if (line.match(/^<\/\w/)) indent--;
        formatted += '  '.repeat(indent) + line + '\n';
        if (line.match(/^<\w[^>]*[^\/]>.*$/)) indent++;
      });
      return formatted.trim();
    }

    function formatCSS(css) {
      // FormataÃ§Ã£o simples: quebra cada regra em nova linha
      return css
        .replace(/}/g, '}\n')
        .replace(/{/g, ' {\n  ')
        .replace(/;\s*/g, ';\n  ')
        .replace(/\n\s+\n/g, '\n')
        .trim();
    }

    function formatJS(js) {
      // Apenas identaÃ§Ã£o bÃ¡sica (nÃ£o Ã© um beautifier real)
      try {
        // Tenta formatar como JSON, se possÃ­vel
        return JSON.stringify(JSON.parse(js), null, 2);
      } catch {
        // SenÃ£o, apenas identa chaves e pontos e vÃ­rgula
        return js
          .replace(/;/g, ';\n')
          .replace(/{/g, '{\n  ')
          .replace(/}/g, '\n}\n')
          .replace(/\n\s+\n/g, '\n')
          .trim();
      }
    }

    document.querySelectorAll('.format-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const target = document.getElementById(this.dataset.target);
        if (this.dataset.target === 'html') {
          target.value = formatHTML(target.value);
        } else if (this.dataset.target === 'css') {
          target.value = formatCSS(target.value);
        } else if (this.dataset.target === 'js') {
          target.value = formatJS(target.value);
        }
        updatePreview();
      });
    });

    // Removido o autocomplete de tags e chaves

  </script>
</body>
</html>
